++++++++++++++++++++++++++++++
<style>
h4 { margin-bottom: 0.5em; margin-top: 1em; }
</style>
++++++++++++++++++++++++++++++

= Anki 2.1 Beta Builds =

== At a glance ==

If you're new to Anki 2.1, please see https://apps.ankiweb.net/docs/changes.html#v21
for a high-level summary of changes.

== Downloads ==

You can get the latest beta from https://apps.ankiweb.net/downloads/beta/

== Problems ==

If you run into any issues, please let us know on the beta testing section of
our support site:

https://anki.tenderapp.com/discussions/beta-testing

== Detailed changes ==

=== Changes in 2.1.14beta1 (702788c8) ===

- Fix an issue with steps getting lost when learning cards moved out of a V2 filtered deck.
- Fix lost space when pasting indented text.
- Limit image height relative to window height, not document height.
- Fix deck list being re-rendered unnecessarily.

=== Changes in 2.1.13beta3 (3ba55990) ===

This is a candidate for the next stable release, so if you encounter any
issues, please let me know as soon as you can.

- Fix preview window failing to appear when 'show both sides' enabled.
- Removing trailing BR tag when pasting into an empty field.
- Don't throw an error when non-Latin text in the Javascript console can't be shown.
- Double click on add-ons to edit their configuration (thanks to lovac42).
- Fix the window icon in a few screens (thanks to John).
- Don't highlight the deck selection button in the add screen on Windows.
- Improve the default 'type in the answer' note type.

=== Changes in 2.1.13beta2 (bcb422be) ===

- Fix a packaging error that was preventing startup.
- Fix relearning cards being given learning step count in V2 scheduler.

=== Changes in 2.1.13beta1 (9ce1f051) ===

- Fix formatting getting lost when copying&pasting between fields on macOS.
- Fix some issues that cause the main window to get stuck.
- Fix an empty deck list sometimes appearing when restoring from a backup.
- Fix Anki hanging after an error occurs during startup.
- Fix error caused by profile with trailing space on Windows.
- Fix error message when syncing with an unconfirmed email address.
- Use jsonschema for add-on manifests (thanks to Erez).
- Warn in DB check when high due numbers are encountered.
- Improve error messages on full disk and failed add-on deletion.

=== Changes in 2.1.12beta4 (eef86bf3) ===

- Fix an error caused by missing note types.
- A possible workaround for the audio player getting stuck on Macs.
- A few other minor fixes.
- Display the installed version in the Windows uninstall screen.

=== Changes in 2.1.12beta3 (4a2f39e8) ===

- The Mac build now uses the new hardened runtime on Mojave - please report
any regressions you may notice.
- Fix possible blank window on startup on Windows.
- Revert AltGr change in Beta1 due to side effects - it's been moved into an add-on.
- Fix some issues with previewing.
- Disable add-on config button when not appropriate (thanks to Glutanimate).
- Add-ons hosted on AnkiWeb can now define conflicts in the manifest file.
- Other minor fixes.

=== Changes in 2.1.12beta2 (380d59f7) ===

- See beta3.

=== Changes in 2.1.12beta1 (380d59f7) ===

- Tweaks to the 'deck age' graph binning (thanks to Jian).
- Fix memory leak in card layout screen.
- Fix preview window in browser sometimes not updating.
- Fix card counts not updating when a review is undone.
- Switch to mplayer on the alternate OS X build, as mpv was not working on
some older machines.
- Make sure mpv doesn't attempt to load scripts from default location.
- Fix an error that could occur on startup on some Windows installs.
- Fix an issue checking for add-on updates (thanks to Glutanimate).
- Fix fields appearing under editor buttons.
- Fix an issue that could prevent profile renaming/deletion on Windows.
- Change focus outline colour on Windows.
- Work around a Qt issue that could cause AltGr+key combinations to trigger
a shortcut (thanks to dlon).

=== Changes in 2.1.10beta2 (0543df7d) ===

- Improve Japanese interface font on Windows 10, and make it possible for
translators to change the font for other languages that need it as well.
- Fix inability to start if problem occurs on first run.
- Revert a change in the last beta that broke a bunch of add-ons.

=== Changes in 2.1.10beta1 (73761b59) ===

- Allow decreasing daily limits in custom study.
- Add option to strip html in export.
- Avoid nbsp for single spaces when pasting text.
- Fix preview screen flashing when moving between cards.
- Improvements to the add-ons screen (thanks to Glutanimate).
- Support .ankiaddon bundles (thanks to Glutanimate).
- Improve subpixel antialiasing on some machines (thanks to Glutanimate).
- Add a button to copy debug info to about screen (thanks to Glutanimate).
- Fix problem running from source on Windows (thanks to dlon).
- Allow add-ons to serve files from mediasrv (thanks to Glutanimate).
- More user-friendly error messages for some network errors.

=== Changes in 2.1.9beta4 (a0b9b6c0) ===

There was a bug in 2.1.9beta1 when switching between the v1 and v2 schedulers.
If you changed the scheduler in 2.1.9beta1, please restore from an automatic
backup made prior to using beta1, in order to correct your review history.

When you switch between schedulers using beta2+, it will adjust the answers in
your review history for learning cards, to account for the fact that the 2nd button
was 'good' in the old scheduler, and is 'hard' in the new one. If you take a
screenshot of your 'answer buttons' graph prior to changing the scheduler,
you should find only the learning cards change. Please note that this means
if you downgrade to the normal scheduler, any 'hard' answers will be treated
as 'good' in that graph.

- Fix a memory leak in the 'edit current card' dialog.

=== Changes in 2.1.9beta3 (bca31bf3) ===

- Ensure a full sync is forced when restoring from a backup.
- Ensure full window is on screen when displaying windows on a changed
screen layout.
- Improvements to the add-ons, debug console, and error screens (thanks to Glutanimate)
- Ensure \{\{Deck}} shows the correct deck when adding (thanks to Arthur)

=== Changes in 2.1.9beta2 (7f8b4b89) ===

- Fix an error loading the graphs when the v2 scheduler was recently enabled.
- This beta also includes an experimental fix for windows being shown off-screen
on multi-monitor setups - please let me know if it helps or causes any
regressions.

=== Changes in 2.1.9beta1 (b06b70f7) ===

A bug was discovered in this beta that made incorrect changes to your review
history when switching between schedulers. If you changed the scheduler
using this beta, please restore your collection from an automatic backup that
was made prior to updating, in order to correct your review history.

Changes:

- Update standard build to latest toolkit version.
- Hardware acceleration defaults to off again on Windows/Linux, due to the
issues it was causing some users.
- Fix BR tags being included in empty fields (thanks to David and zjosua)
- Optimize field repositioning (thanks to Arthur)
- Fix a crash when copying/cutting with an empty selection (thanks to David)
- Avoid screen flash when undoing reviews.
- Make sure info/warning dialogs appear on top.
- Fixed an issue with just-typed text not being saved when using the mouse to
save/add a card.
- Added support for \{\{CardFlag}}, which is either empty, or in the format "flagN"
where N is 1-4.
- Fix bulk flag changes in Browse screen not syncing.
- Fix advanced menu in editor not showing shortcut keys.
- When UI fails to load after resuming computer from sync, show a tooltip and
automatically refresh.
- Clean up old mplayer instances after a crash so that profile renaming works.
- Fix add-on list not refreshing when toggling enabled in latest toolkit.
- Fix cursor jumping on first click in "Edit Current" area on Windows.
- Preserve whitespace when pasting plain text.
- Prevent errors caused by a timer firing after collection is unloaded.

=== Changes in 2.1.8beta2 (71e0c880) ===

- Fix startup on Windows 8.
- Fix field content appearing under editor buttons.
- Better handle an error when recording.
- Fix improper handling of collections with deck errors.
- Fix duplicate deck names being created due to text encoding.

=== Changes in 2.1.8beta1 (c740723e) ===

A Linux-only beta:

- Fix gtk2 theme and fcitx module not being included.
- Detect nouveau graphics drivers and automatically switch to software rendering.

=== Changes in 2.1.7beta2 (a6c34fd7) ===

- Fix "QPushButton has been deleted" error messages after a problem
occurs changing note types.
- Fix errors during "Check Database" that are just a byproduct of a previous
operation that failed.
- Another fix for non-Latin characters in add-on configuration.

=== Changes in 2.1.7beta1 (0769bf7a) ===

Beta builds now use the next release name (eg "2.1.7"), but can be identified
in the about screen by the build number (eg "0769bf7a").

- Fix problems searching for some non-Latin text in decks/note type names.
- Ensure cgi and uuid modules are available to add-ons.
- Improvements to the Windows installer.
- Automatically restart mpv if it stops responding.
- Don't convert non-Latin characters in add-on configuration to
difficult-to-read escape codes.
- Add a bottom border to the menubar on Windows 10.

=== Changes in 2.1.6beta2 ===

Please also see the beta1 notes.

- Fixed Asian language input on recent Windows 10 installs.
- Importing apkgs is now more verbose about how notes have been handled.
- Find&replace now only shows fields relevant to the notes you've selected,
and is case insensitive.
- Fix card list not updating when editing HTML.
- When adding media to cards, Anki now will automatically rename the
filenames if they're too long.
- The experimental scheduler now regularly checks if new learning cards
have become due.
- Handle invalid add-on config (thanks to Arthur).
- Enforce template ordering when card templates are reordered after card
creation (thanks to Arthur).
- Don't change deck when Esc pressed in deck chooser (thanks to David)
- Fix a problem on initial startup when English not the default language.

=== Changes in 2.1.6beta1 ===

Downloads are now split into a standard and alternate version.

*The standard version*:

- Is built with the latest toolkit, which fixes various issues.
- Changes the undo shortcut back to Ctrl+Z or Command+Z like Anki 2.0.
- Includes a separate anki-console.exe executable in the Windows build that
may be useful for add-on authors.
- Includes support for the fcitx input method and a gtk2 theme
in the Linux build.

You can switch between the standard and alternate 2.1.6 without problems.
If you move back to a previous Anki 2.1 release, your sync login details
and window positions will be lost, and will need to be set again.

*The standard version has updated requirements*:

- The Windows build only supports 64 bit Windows 7 or later, and will
not run on a 32 bit install.
- The Mac build requires macOS 10.12 or later.
- The Linux build requires a Linux distribution from approximately 2016
or later.

The alternate version is similar to previous Anki 2.1 releases, and is
built with an older toolkit. It will run on some older systems that
the standard version will not, but as it is not as up to date it may be
missing bugfixes and security improvements that the standard version includes.

*The alternate version (-alt) will run on*:

- Windows 7 32 bit or 64 bit installs
- Mac 10.10 or later.
- A Linux distro from around 2014 or later.

*In addition to the toolkit upgrade, there have been some changes in Anki itself*:

- Improvements to the Browse screen and flagging:
** Search text is normalized, which fixes problems searching for unicode
characters with multiple possible encodings.
** The selection is now partially transparent, allowing you to see the underyling
colours of the rows.
** The screen doesn't scroll when performing actions that don't change the
selection count.
** Flags now toggle on and off, and the separate clear flag action has been removed.
** The second flag is now orange instead of purple.
- Prevent errors caused by the user adding a field reference to itself on a field.
- Better handle issues with the deck list, such as decks that are missing a
parent deck.
- Anki should now be able to function even if a system proxy is configured
for localhost connections.
- Fix font size being copied when pasting between Anki fields with bold text.
- Pasting a link with shift held down now creates a clickable link.
- Fixed an issue with the bulk remove tags option where tags with similar names
could be removed as well.
- Fixed an error that occurred with very long filenames on Windows.
- Fixed an issue running dvisvg on some Linux installs.
- The Browse screen's sidebar now defaults to on.
- Fixed a race condition that could cause two copies of Anki to open.

=== Changes in 2.1.5beta2 ===

- Fix error when hitting enter/space with no button selected.
- V2 scheduler now respects maximum interval even if it will lead to all buttons giving the same interval.
- Tweak margins in overview and answer button areas.
- Ignore UI events that are received after collection has been closed.
- Don't try to import .anki(2) files as text.
- Added support for Lojban (thanks to giqtaqisi)

=== Changes in 2.1.5beta1 ===

- Use selected answer button instead of default when enter/space pressed.
- Change undo shortcut in browse screen to avoid conflict with editing functionality.
- Ignore standard mpv config file location in favour of Anki data folder.
- Fix importing of .apkg files when interface in Dutch.
- Fix translations not working on Linux after 'make install'.
- Support newlines in type:cloze, and treat them as spaces.
- Add browser.rowChanged hook for add-on authors.
- Possible fix for some 'database is locked' errors.
- Fix errors on startup when deck given an invalid name.
- Fix sorting not working when field contains only a media reference.
- Fix 'access denied' error not being caught properly.
- Fix exporting of v2 colpkg when interface in non-English language.
- Fix conditional replacement not ignoring HTML formatting.
- Fix question fade time being forced when hardware acceleration on.
- Add a small margin between buttons during review.

=== Changes in 2.1.1beta2 ===

Detect when video drivers fail to load, and automatically switch
to the next driver when Anki is started again.

The --hwaccel option has been removed in favour of a file in your Anki
data folder, which you only need to change once.

To force hardware acceleration on Windows, run cmd.exe and type the following:

  echo auto > %APPDATA%\Anki2\gldriver

Available options are 'auto', 'angle', and the default 'software'.

On Linux, in a terminal:

  echo auto > ~/.local/share/Anki2/gldriver

Available options are 'auto' or the default 'software'.

=== Changes in 2.1.1beta1 ===

- Fix exporting of .apkg files with the regular scheduler.
- Updated toolkit on Windows build.
- Fix windows not showing up in tabs on OSX in full screen mode (you may
need to close and reopen them once).
- Convert embedded images to files when pasting HTML.
- Fix pasting of copied images from Finder.
- The sort field is now shown RTL when set to RTL in the field options.

=== Changes in 2.1.0rc2 ===

This build disables hardware graphics acceleration on Windows and Linux by
default. Please report on the beta thread if you notice any difference in
performance or experience any problems. Hardware acceleration can be
optionally enabled: https://apps.ankiweb.net/docs/changes.html#hwaccel

Also:

- Fix sync timeouts when syncing a large number of deletions.
- Experimental scheduler changes:
** The 'new interval %' option is applied to the scheduled interval instead of the elapsed interval.
** Limit randomization applied to learning steps to 5 minutes, and don't modify delay for 1+ day learning cards which could cause them to be scheduled an extra day.
- Better handle duplicate deck names.
- Added some improvements for add-on authors (thanks to Glutanimate)
- Fix browser getting stuck when attempting to hide last field (thanks to Glutanimate)

=== Changes in 2.1.0rc1 ===

- Fix field text not being saved when typing in the Windows IME.
- Select current card when Browse screen appears.
- Select current template when opening the Cards screen from Study>Edit.
- Fix focus being changed when playing audio.
- Remember file selector dialog state.
- Leave space after deck:current in search screen.
- Fix an issue with reverting to the V1 scheduler.
- Don't create a broken file when aborting export of single deck with
V2 sched.

=== Changes in beta 43 ===

- In the standard scheduler, filtered decks will now ignore cards in learning
when they are built.
- The "cram all cards" option in custom study has been divided into
separate "cram review cards" and "preview all cards" options - the former
has rescheduling turned on.
- Experimental scheduler changes:
** Card counts are no longer capped to 1000 when a deck is selected.
** The hard factor (120% by default) can now be customized in the deck options.
** Increase the bonus easy cards receive when reviewing early.
- Avoid reordering existing cards when importing a text file (thanks to Mai)
- Detect when a proxy is breaking Anki's interface.
- Fix media check not picking up some media in cloze deletions.

=== Changes in beta 42 ===

- Fix suspended leeches reappearing in the experimental scheduler.
- Fix card info dialog not remembering size.
- Fix an issue with reporting errors when collection not open.

=== Changes in beta 41 ===

- The experimental scheduler no longer applies any interval boost for delayed
cards that are answered Hard.
- Fix cards being imported incorrectly when the target deck is a filtered deck.
- Preserve scroll position in deck browser when expanding/contracting decks.
- Fix multi-line cloze deletions not being detected correctly.
- Tabs and newlines now preserved when pasting with ctrl/cmd+shift+v.

=== Changes in beta 40 ===

- Fixed a bug that could cause cards in relearning to be scheduled incorrectly when they're imported into a different collection.
- Fixed reviews with the experimental scheduler showing up as relearning in the stats.
- Performance improvements for users with many decks.
- Changed stats shortcut key.
- Attempt to restore the previous active window when mpv finishes playing a video.
- Friendly error when internet down.
- Fixed cloze number not incrementing properly if you made a cloze deletion
directly after an edit (thanks to dlon).
- Fixed handling of fonts with spaces in their names on Linux (thanks to Mark).
- Added Armenian translation (thanks to Arman).

=== Changes in beta 39 ===

- Fixed sound tags causing freezes on Windows when users had mpv.exe
from a previous install lying around.
- Fixed a previously pasted image appearing instead of pasted/dropped text or
links. The previous behaviour may also have been responsible for crashes.

=== Changes in beta 38 ===

The experimental scheduler can now be enabled from the preferences screen, and
warnings about data loss have been relaxed somewhat. It is still only
recommended for advanced users at this point.

Also:

- Add the missing "custom steps" section back to the filtered deck options
when using the regular scheduler.
- Fixes for dragging and pasting images from web browsers.
- Fix pastes with the middle mouse button on Linux.
- When switching to a different window and then back to the Anki editor,
the cursor position is no longer moved to the bottom of the field.
- Fix a field getting overwritten when showing duplicates, and catch similar errors.
- Restore focus to Anki window after video finishes playing.
- Fix busy cursor in full sync screen.
- Add space to "waiting for editing" screen.
- Check uploads don't exceed AnkiWeb limits.
- Added an option to disable certificate validation - see "SSL errors" above.
- Fix a "c++ object has been deleted" error message.
- For add-on authors, pycmd() can now return a value.
- Wording tweaks in find duplicates screen (thanks to homocomputeris)
- Ensure mpv doesn't stay open (thanks to Dudemanguy911)
- Support non-Latin text in config.md (thanks to ljcooke)
- Fix the debug key shortcut on some keyboards (thanks to glutanimate)
- Tweaks to the makefile (thanks to dsd)

=== Changes in beta 37 ===

- Fix some files being detected as changed when they hadn't been on macOS High Sierra.
- On new installs, sibling burying now defaults to off, and the daily review limit defaults to 200.
- Load add-ons in a consistent order.
- Fix error when closing browser appearance screen.
- Ignore the note deletion shortcut when the card list area is not focused.
- Fix quotes being imported as HTML entities in text import.
- Don't show 'delete unused' button when there are no unused media files.
- Fix a 'C++ object has been deleted' message.
- If the clipboard is locked by another process, show an error message.

=== Changes in beta 36 ===

- Show average answer time in today stats.
- Raise profile window when it appears on MacOS.
- Fix "find duplicates" window scrolling to top when link clicked.
- Catch more problems with corrupt collections.
- Check the shift key when paste begins, not after images have been fetched.
- Skip progress window when pasting local links.
- Fix importing of colpkg files made with experimental scheduler.

=== Changes in beta 35 ===

- Updates to the experimental scheduler.
- Fix for not being able to drop some items into Anki fields.

=== Changes in beta 34 ===

- Fixed error when unburying.
- Preserve newlines when pasting text.
- Fix field searches with _ character.
- Preserve ordered lists when pasting.

=== Changes in beta 33 ===

- Fix preferences screen failing to load.
- Fix for the experimental scheduler.

=== Changes in beta 32 ===

- Fix audio issues on Windows.
- Be tolerant of invalid characters stored in notes by previous Anki versions.
- Updates for the experimental scheduler. If you're testing the experimental
scheduler, please disable it prior to upgrading, and enable it again after
upgrading.

=== Changes in beta 31 ===

This build contains experimental scheduling changes that are not enabled by
default. For more information, please see
https://anki.tenderapp.com/kb/anki-ecosystem/experiment-scheduling-changes-in-anki-21

- The Windows build has been switched back to mplayer, due to current issues with the mpv code.
- The Windows installer now installs the desktop and start menu shortcuts for all users.
- Change the way the progress dialog is implemented, which should fix some issues. Please report any regressions.
- Tweak reviewer margins.
- Fix CSV import error (thanks to Carl)
- Make it easier for add-ons to override review context menu (thanks to dubiousjim)

=== Changes in beta 30 ===

See beta 31.

=== Changes in beta 29 ===

- Fix a packaging bug that was breaking the filtered deck screen.
- Fix sound references with ampersands (thanks to Artem)
- Use fixed margins in review screen instead of being dependent on font size.

=== Changes in beta 28 ===

- Added a right-click context menu to the browser card list.
- Work around pops in the start of audio recordings.
- Add the ability to disable certificate verification via add-on.
- Add an option for add-ons to add buttons to the editor that are always active.
- Refuse to run on Qt 5.10, due to current issues.
- The cloze note type now defaults to an easier to see colour in night mode.

=== Changes in beta 27 ===

- Added an option to switch cards to white on black text in the preferences
screen. To customize, see
https://apps.ankiweb.net/docs/am-manual.html#night-mode-styling
- Prevents shortcuts in the editor from triggering an error when no field selected.
- Play any audio on the question as well when 'show both sides' enabled in preview window.
- Fix the focus being lost when add-ons like Japanese Support change field contents.
- Force text to wrap instead of showing a scroll bar.
- Added Catalan translation (thanks to Guillem), and other translation updates
thanks to other contributors.

=== Changes in beta 26 ===

- Added some environmental variables to control UI scaling - they are documented above.
- Faster syncs when you have a lot of media and no media changes were made
since the last sync.
- Allow importing of files from recent Mnemosyne versions.
- A translations fix (thanks to Piotr, and all the other people who have been
contributing translations).

=== Changes in beta 25 ===

This release ensures that when pasting remote image links, they will be
converted into local images even if the link doesn't end with a recognizable
extension.

If a search for 'http' in your collection reveals remote images, you can use
https://ankiweb.net/shared/info/1293255374 to turn them into local images.

Also:

- Catch errors when pasting, and time out after 30 seconds.
- Fix errors after deleting a deck with a subdeck that was the default deck.
- Fix an error when pasting images that had previously been downloaded.

=== Changes in beta 24 ===

- Fix stuttering when more than one audio file on a card on Windows.
- Fix broken image links when pasting between fields.
- Don't import styling changes if the local note type has been modified more recently.
- Fix errors when pressing keys quickly after a sync started.
- Fix startup crashes on some Linux distros.

=== Changes in beta 23 ===

- Fix field contents not persisting when dragging media files onto field.

=== Changes in beta 22 ===

- Fix hang when copying and pasting between fields.
- Strip excess whitespace when pasting external content, which was breaking
cloze deletions.

=== Changes in beta 21 ===

Pasting now strips more by default, such as links, headers and tables. Holding
down the shift key while pasting will reduce the level of filtering.

Also:

- Pasting a link to an image or sound hosted on a HTTPS website should no longer fail.
- Fix the question audio replaying when answer shown.
- Make sure the interface is disabled while progress/sync bar displayed.
- Fix error when undoing then immediately hitting enter on a type answer card.
- Fix missing styling when answer revealed too quickly.
- Fix shift+tab in the editor on macOS.
- Filter out background and font style when pasting between fields.
- Don't leave a .wav file around when recording.
- Drop support for experimental 'new style whitespace' handling.
- Fix inability to paste link to .aspx file.
- Fix media check not detecting media references in cloze deletions.
- Ctrl+d can be used in the tag selector of custom study to deselect all tags.
- Fix link to _anki.png in template not working.

=== Changes in beta 20 ===

- Probable fix for intermittent startup error on Windows.
- Fix 'not responding' process on macOS.
- Don't capture media keys.

=== Changes in beta 19 ===

Built with the recently released Qt 5.9.2. Please report any improvements or
regressions.

=== Changes in beta 18 ===

- If mpv is unavailable or too old, use mplayer instead.
- Remove "unexpected DPI" message and --lodpi option; tweak handling of scaling.
- Don't show album artwork when playing audio.
- Increase the default number of backups, and stop sending them to the recycling bin.
- Show field numbers in the Fields dialog.

=== Changes in beta 17 ===

This release experiments with a switch from the old "mplayer" program to
"mpv", which is a newer program based on mplayer. mpv is bundled in the
Windows and Mac builds - Linux users will need to ensure it is available on
the system. The change will hopefully address issues people had with audio
being cut off or not playing properly. Please report any improvements and
any regressions.

Also:

- Added --lodpi argument in an attempt to address wrong clickboxes for some
people on Windows. If Anki suggests you use it, please right click on the Anki
icon and add --lodpi to the command line, then start Anki again. Please report
if it fixes or does not fix the problems.
- Another fix for MathJax+cloze deletion.
- Ignore math environments outside of MathJax tags.
- Fix a problem starting Anki on systems with non-Latin hostnames.
- Add shortcuts to the advanced menu in the editor.
- Fix text:Field not stripping HTML if it was split over multiple lines.
- Fix filenames not being normalized when importing.

=== Changes in beta 16 ===

MathJax display environments now need to start with `\[` and end with `\\]`,
instead of using `$$`. Shortcut keys have been added to the editor to make
using these easier, but existing MathJax cards will need to be updated
unfortunately.

Backups and collection exports now use a separate .colpkg file extension,
which allows translating of their titles and allow multiple collection exports
to be stored in one folder. The other clients will be updated to understand
these extensions in the future; for now if you need to interact with them, you
can rename the file.

Also:

- Fixed backups not being made correctly on some systems.
- Fixed old backups not expiring. Anki will only look for .colpkg files now,
so you will need to manually remove your old .apkg backups.
- Collection exporting and saving graphs to PDF now lets you choose the target
folder, and the default folder is now the documents folder instead of the
desktop.
- Fix the preferences screen loading slowly, opening multiple times, and not
closing when the collection is closed.
- Fix preview window not closing on collection close.
- Fix inability to preview the answer of the last card.
- Cloze deletions should now properly remove highlighting only when in a
MathJax environment.
- Add-ons now have a persistent user_files folder - please see the add-on docs.
- Tweak margins in deck options.
- Fix searches for decks with parens in the name.
- Fix Anki interface displaying incorrectly when Windows has an incorrect mime
type for css files.
- Tweaks to the text displayed when an error occurs.
- The "oldest seen first" option in filtered decks now sorts based on last
review instead of card modification time.
- The prepareQuestion/prepareAnswer hooks have been merged into prepareQA -
please see the add-on docs.
- Don't force audio format on Windows - please let me know if you encounter
regressions playing audio.
- Clicking on a note type in the browser now searches with the name instead of
the note type ID.
- Refuse to run when locale configured incorrectly on Linux.
- Fix remaining issues with formatting being lost when cutting and copying
between fields.
- Remove the trailing `<br>` when saving a field.
- Fixed translations in dialog buttons.

=== Changes in beta 15 ===

- Look for changed media files when syncing, even if no files have been added
or removed. If you have many media files and notice a slowdown when syncing,
please let me know.
- A fix for the UI sometimes loading improperly.
- Various improvements to the tag completion area (thanks to Glutanimate).
- Hotkey for "show both sides" in preview window (thanks to Glutanimate).
- Fix margins in preferences screen.
- Some fixes for the add-on configuration code.
- Don't strip formatting when pasting from one field in Anki to another.
- Check Media now catches invalid filenames on Linux systems.
- Fix toggling of suspend etc when multiple cards selected.

=== Changes in beta 14 ===

Added a simple configuration mechanism for add-ons, intended for use when
users would have previously had to edit an add-on's source code. Configuration
is not lost when add-ons are updated. For more info, please see
https://apps.ankiweb.net/docs/addons21.html#configuration

Also:

- Option for showing both sides in preview screen.
- When a user starts Anki 2.1 for the first time, it will now import the profile data from Anki 2.0.
- Add JS hooks to the reviewer for doing things like automatic scrolling at the right time:
https://apps.ankiweb.net/docs/addons21.html#javascript-in-the-reviewer
- Fix scrollbar appearing at certain DPI scales.
- Fix 'clear flag' shortcut.
- Add 'collection' and 'current deck' to the sidebar.
- Add recording icon back to record window.
- Warn about subfolders in media check.


=== Changes in beta 13 ===

Add-on authors can now upload separate files to AnkiWeb for 2.0 and 2.1
support, and Anki 2.1 will automatically list and download the 2.1 versions.

The add-on menu has been moved into a separate dialog, which supports:

- checking for and downloading updates
- deleting and disabling multiple add-ons at once
- viewing an add-on's page

Add-ons are now always stored in a single folder, and need to be uploaded as a
.zip - please see the updated docs for more information:

https://apps.ankiweb.net/docs/addons21.html#add-on-folders
https://apps.ankiweb.net/docs/addons21.html#sharing-add-ons

Also:

* Helper routines in editor to make porting add-ons easier (thanks to Glutanimate)
* Catch errors when card templates contain invalid HTML (thanks to Alicia)
* Fix translations and shortcuts on editor buttons.
* Revert the undo shortcut change in the previous beta.
* The Check Media function can now fix a corrupt media database.
* Remember export folder location.
* Make sure debug console and tooltips closed when closing profile.
* A fix for Anki failing to start on some Windows machines.

=== Changes in beta 12 ===

Fixes an issue that could allow a specially crafted .apkg file to write files
outside the media folder during import. AnkiWeb shared decks were not
affected, but upgrading is strongly recommended if you import .apkg files from
third party sources. A big thanks to David Bailey for discovering this issue.
2.0.47 is also available with this fix.

Also:

* Rewrote parts of the collection opening/closing code and window closing
code, which should ensure the collection isn't closed until windows have a
chance to clean up.
* The profile manager now has a button to restore a profile to an automatic
backup, which will take care of clearing out a corrupt collection and make
sure backups are not rotated when restoring.
* Added an optional sidebar to the browse screen; toggle via the Filter button.
* Icon tweaks.
* Ctrl+1-9 can be used to jump to the first 9 card templates in the card layout screen.
* Add a default note type for typing in the answer.
* Backups now include the date in the filename.
* Backups are sent to the trash instead of being deleted outright.
* Fix decks being moved to the default deck when dragged to the bottom (thanks
to David Bailey)
* Fixed some issues with field contents being updated with the wrong content.
* Better support for DPI scales that are not multiples of 100% on Windows.
* The Filter button now uses more obvious titles when splitting menus into
submenus, and will split the decks and note type lists if necessary as well.
* Tweak some shortcuts.
* Better error when internet offline.
* Drop support for profile passwords.
* Fix shift+tab in the editor on Windows/Linux.
* Restored support for the marked tag.

=== Changes in beta 11 ===

- Simplify the browser window:
** Items in the top toolbar have been moved into the menu bar.
** The sidebar has been replaced with a dropdown menu.
- Remove 'mark' action in favour of 'flags':
** Flags are set on individual cards rather than the whole note.
** A card can be set to one of four different coloured flags.
** The reviewer and browser will show and set flags.
** Other clients will need to be updated to display and set flags, but flagged
cards should keep their flags when synced to older clients.
- Limit the length of the card layout summary, and remove the ordinals.
- Fix clozes in brackets losing formatting.
- Restore maximize button in edit window.
- Disable rather than hide the card type list in cloze note types.
- Remove icons from a few screens.
- Bundle a new mplayer on OSX which works on older CPUs.

=== Changes in beta 10 ===

- Improve the MathJax rendering speed, which was making the fade out/in
animations slower than they should have been.
- Revert the "answer on top" experiment and remove the delay when revealing
the answer side.
- Delays can be customized via the qFade/aFade variables in Javascript - set
to 0 to disable.
- Added the ability to override JS/CSS over all note types, so you can do
things like customize the fade duration globally. More info: https://github.com/dae/anki/commit/55b782581d39f3a4b184ff3f24a59d51ad8c9e83
- Hide sound tags in preview screen.
- Make sure exporting doesn't try to export subfolders.
- Fix operations like suspend not working correctly when multiple cards selected.
- Remove border on bottom area.
- Better support for high resolution displays on Windows.
- Fix the toolbar in the browser not resizing to fit.
- Display used fields in card type list.
- Fix the focus not returning to the front field when adding cards.
- Fix an issue that was preventing some styling in card templates from
overriding the defaults.

=== Changes in beta 9 ===

- Update the card layout screen to use a dropdown instead of tabs, and render
the preview more efficiently.
- The card layout and preview window in the browser now render cards the same
way as the review screen.
- Fix a bug that was preventing Anki from shutting down properly on Windows.
- Fix a bug that was causing images not to show if the media server port was
in use.
- Support make install/uninstall on Linux.
- Make the down key do the right thing when browser window opened.
- Make it easier for add-ons to override shortcuts for a specific state.

=== Changes in beta 8 ===

Experiment with showing the question below the answer, which makes the fade
out/in step more natural, and means the answer will always appear in the same
place. Please let me know if you like it or hate it. Will only work if your
back template starts with \{\{FrontSide}} <hr id=answer>.

Also:

- Fixed "shortcut key" getting duplicated (thanks to David).
- Fixed pasting of files with a hash in the filename (thanks to David).
- Fixed some errors caused by closing a window before it had a chance to
initialize (based on a patch by David).
- Fixed autoplay on the answer side.
- Fixed some issues with screens getting stuck when closing the browser window, etc.
- Possible fix for Anki failing to run on some Windows machines.

=== Changes in beta 7 ===

- Removed the preloading code from the previous beta, as it was causing a
number of problems.
- Added a transition when revealing the answer - necessary now that we're not
preloading the answer.
- Fix the type in the answer function.
- Reworked the focus handling in the editor, which fixes a bug that could
cause the first field to be overwritten when navigating via the preview
screen.
- Fixed a similar bug triggered by dropping text onto Anki when another window
had focus.
- Fix gifs failing to display.
- The mhchem module is now bundled and enabled by default, so you can typeset
chemical equations:
https://mhchem.github.io/MathJax-mhchem/
- Work around MathJax failing to display when part of it is cloze deleted.
- Possible fix for Anki failing to exit properly.
- Fix field content appearing under the editor buttons.
- Fix some encoding errors when generating LaTeX and showing JS errors.
- Change the add/del tags shortcuts so they don't conflict with the jump to
tags function.
- Prevent some errors when holding down navigation keys/navigating too quickly.
- Fix some issues that were preventing the Linux build from working for some users.

=== Changes in beta 6 ===

Linux users: there are two Linux builds for this release. The "normal" build
should now work on Ubuntu 14.04 and similar distributions, and should be fine
for more modern distributions too. If you encounter a problem with the normal
build, please try the alternate one, and let us know that the normal one is
not working for you.

Other changes:

- Add a fade out/fade in transition between cards when reviewing, which
minimises pop-in for cards using images and MathJax.
- Render the answer at the same time as the question so it can be revealed
instantly.
- Fix a bug that was overriding the font of some columns in the browser when
they shouldn't be overridden.
- Add the ability to turn off font overriding in the "browser appearance"
screen.
- Fix \n appearing when hitting enter in new whitespace mode.
- Fix translations not working on a Mac.
- Fix the upload/download dialog not working in KDE on Linux.

=== Changes in beta 5 ===

- Experimental MathJax support for writing equations without LaTeX - try
something like the following on a card. Equations will pop in, as
they are rendered after the card is shown. The next AnkiMobile beta will
support MathJax; the other clients will need to be updated.

-----
\(\sqrt{x^2}\)

$$x_3$$
-----

- LaTeX can now be rendered as a .svg file instead of a .png file, which can
be scaled to arbitrary sizes without losing quality. You'll need to have
dvisvgm installed, and can then enable it via Tools>Manage Note Types>Options.
The next AnkiMobile beta will support .svgs; the other clients will need to be
updated.
- Fix IBus input method not working on Linux.
- Fix superscript shortcut key.
- Both reviewer and browser use ctrl+delete as shortcut for deleting the
current/selected card now.
- Fix crash when syncing on Windows.
- Improve display of cloze and LaTeX tags when field is in RTL mode.
- Work around ampersands appearing in deck names when running in KDE.

=== Changes in beta 4 ===

- yet more fixes for Anki failing to start on some Linux distros
- fixed errors that could happen when add-on authors wrapped an Anki function (thanks to dequis)
- make it easier for add-ons to extend bottom buttons (thanks to Dmitry)
- don't load iframe content in a separate browser window
- remove the change in beta 3 that was leading to lots of non-breaking spaces in pasted text

This beta also introduces experimental support for alternative whitespace
handling. When enabled for a note type via Tools>Manage Note Types>Options,
the editor and reviewer will wrap your HTML content in a pre-wrap whitespace
environment. What this means is that instead of using <div> and &amp;nbsp;
tags/entities to denote newlines and indents, normal newline and space
characters will be used. Things to note:

- This is experimental at the moment, and may go away if major issues are
discovered. For now, please consider it something to play around with rather
than something to rely on.

- The mobile clients do not currently support the option, though you may be
able to get cards to display the same way when reviewing on mobile by adding
white-space: pre-wrap to your card styling in your template.

- When pasting HTML into a field, Anki will try to convert the divs and
non-breaking spaces to more readable whitespace equivalents.

- Existing notes may display differently with the option enabled, because
whitespace is now respected. For example, the following on a card template:

-----
{{Front}}<br>
{{Extra}}
-----

will include two newlines between the fields, because of the newline after the
BR. To get the card to display as before, remove the <br> tag.

If your note contain manually edited HTML or HTML pasted from other websites,
they may also show differently because of the whitespace inside them.

Any feedback on what works and what does not would be appreciated.

=== Changes in beta 3 ===

- more fixes for Anki failing to start on some Linux distros
- fix an issue with the HTML editoring adding br tags on Windows
- paste non-media URLs as text instead of ignoring them
- preserve indents and newlines when pasting text

=== Changes in beta 2 ===

- fix the Anki data being stored in the wrong location on Windows
- upgraded Python and Qt for the Linux build, and fixed various issues with Anki failing to start on recent Linux distros
- show a more helpful error message when attempting to install on a Windows or Mac platform that is too old
- clearer error message when firewall is blocking Anki
- clean up WebEngine processes more quickly after windows are closed

=== Changes in beta 1 ===

- pulled in the latest translations
- add cancel button to recording window
- move stats and sync buttons to center of window
- switch undo shortcut to work around conflicts with WebEngine
- disable pinch to zoom gesture
- fix spurious error code when exiting
- fix 'browse add-ons' command failing on Linux

=== Changes in alpha 15 ===

- Fix for space/enter/etc being interpreted twice
- Tweaks to reduce flicker as windows are displayed
- Use the system background colour for the toolbar areas
- Ensure only one copy of deck stats is shown, and make sure it's closed when the profile is unloaded
- Fix esc key in type answer field
- Fix deck expanded state getting reset when editing

=== Changes in alpha 14 ===

- Upgrade to the recently released Qt 5.9, and drop support for older versions
- The issue with menu shortcuts conflicting with text input boxes should be gone now - this was one issue that holding up a move to beta status.
- Windows 7+, Mac 10.10+, or Linux ~2016+ now required.
- Fix a error when importing from Mnemosyne (thanks to Luke)
- Fix a broken 'lots of decks' message
- Fix an issue running mplayer on modern Linux distros
- Fix window size not being saved in some cases (thanks to Dmitry)
- Fix an error when closing the main window while the browser is open

=== Changes in alpha 13 ===

- Upgrade to Python 3.6 on Windows, which should hopefully provide us with more info about the cause of crashes. If you experience any crashes, please paste the output of your crash.log from the Anki folder, or attach it in a private ticket (https://apps.ankiweb.net/docs/manual.html#file-locations)
- Fix for the browser getting stuck open when syncing, leading to error messages
- Improvements to the next/prev buttons in the previewer (thanks to Glutanimate)
- Preserve tag field focus when switching cards (thanks to Glutanimate)
- Remove some debugging code from the browser that could cause issues/slowdowns
- Tweak to history display in add screen (thanks to Henrik)

=== Changes in alpha 12 ===

- Fix an error when previewing
- Support wildcards in tag deletion (thanks to luoliyan)
- Support \ to escape wildcard characters in tag search (thanks to luoliyan)

=== Changes in alpha 11 ===

- The Windows and Linux builds will move your Anki data to a new location the first time they are run. If you'd like to switch between the alphas and the stable release, please make sure you also upgrade to the latest stable release (2.0.43) which uses the same folder locations. More info: https://apps.ankiweb.net/docs/changes.html
- The Windows build will display a console window when Anki is opened, to help debug problems some users are having starting the app.
- Show error on invalid search instead of just returning no matches
- Fix an error when closing the collection on bleeding edge Linux distros
- $ANKI_BASE env var can now be used to control base folder
- Convert all unicode in the add cards screen and importer to a standard format, to prevent issues with tag/field searches not working.
- Add temporary instrumentation to the browse screen to detect some issues - please report if you get any errors. Also fixed a possible cause of a crash.
- Fix errors occurring when Anki is closed with windows like the browser still open.
- Fix embedded fonts not working.
- Refuse to run on Qt5.8.0, which has some major issues.
- Allow wildcard tag deletion (thanks to luoliyan)
- Don't add tags when deleting (thanks to luoliyan)
- Add-on downloader now accepts multiple IDs (thanks to Dmitry)
- Improvements to the custom study increase new/rev area (thanks to Simone)
- Tweaks to the history button in the add screen (thanks to Henrik)
- Show a better error if user inputs an invalid CSV delimiter (thanks to luoliyan)
- Fix a rare bug that could cause invalid notes to be added (thanks to Glutanimate)
- Fix typo (thanks to Andi)

=== Changes in alpha 10 ===

- shave a second or two off sync in some circumstances
- fix progress window getting stuck on Ubuntu 16.10
- fix unicode errors appearing when pasting non-latin text
- update anki.desktop (thanks to Julian)

=== Changes in alpha 9 ===

- syncs are now cancellable
- embedded fonts are now usable on macOS again
- fix the bottom bar disappearing after edits
- don't force XP mode on Windows, so things like the menubar will now use the modern colour prevent the backspace key from going back a page and breaking things
- fix for 'make install' in the source release
- helpers for addons creating buttons in the editor (thanks to Simone)
- fix for latest sqlite versions (thanks to dequis)

=== Changes in alpha 8 ===

- Graphs can now be exported to PDF
- Fix issues inputting languages like Chinese in the card layout window.
- Possible fix for some crashes
- Fixed Anki segfaulting on startup on some modern Linux distros
- The Mac build should now work on 10.8+
- Mac build now stores files in Library/Application Support like 2.0.37+.
- Tweak the cards/fields button positions
- Remove mention of the Del button shortcut in the More menu
- The history button in the add screen now reflect subsequent edits (thanks to David)
- When syncing a collection with no local cards, explain why Anki wants to download.
- Fixes for Python 3.6

=== Changes in alpha 7 ===

- Fix a serious bug in media syncing that would upload invalid data. If you synced with previous versions, please see https://anki.tenderapp.com/discussions/beta-testing/203-anki-210-al...
- Syncing now shows progress again, and uses a different underlying request library
- Fix some other syncing errors
- Possible fix for some crashes
- Log some information into Documents/Anki/crash.log when Anki crashes. If you experience any crashes in the future (where Anki closes), please send us that file with information about what you were doing when Anki crashed.
- Compress backups in the background, which speeds up profile switching & syncing
- Fix the window not going to fullscreen properly after adding a new profile on Windows
- Increase default size of deck options window
- Tell webengine not to cache images to disk
- Added a hack to preload upcoming images - it will not always work
- Fix an error when deleting notes
- Remove the Del key shortcut to delete notes in the review window, as a Qt bug causes it to be triggered from the type in the answer box.
- Fix an error appearing when the undo shortcut is pressed with nothing to undo
- Make it easier for add-ons to add new editing icons (thanks to Simone).

=== Changes in alpha 6 ===

- Fix audio failing to stop or overlapping
- Fix opening of add-ons / backup folders on Windows

=== Changes in alpha 5 ===

- Built with latest version of the toolkit
- Rather than completely stripping HTML or including it verbatim, paste and drag&drop now simplify the HTML as it is pasted
- Pasted images now use a checksum of the file, so pasting the same image twice will not result in multiple files
- Work around a Qt bug where some shortcut keys like 'f' were triggering menu items instead of entering characters in the type answer box
- Work around the debug console shortcut not working
- Misc other fixes (thanks to noobie, Marcio, Christoph)
- The Linux build now includes a Makefile and can be installed system-wide
- The Mac build is using a different packager. This should prevent the errors people were getting on startup, but has broken the ability to double click on .apkg files outside of Anki.

=== Changes in alpha 4 ===

- tweak fonts
- fix entered text getting lost if closing window/switching note shortly after
  text entered
- fix errors when importing .apkg with media
- fix unicode errors when playing audio files with non-latin text on osx
- autodetect pipe in PSV files and make it easier to extend autodetection list
- fix 'change note type' getting stuck
- ignore harmless http error messages
- re-enable add-on downloading
- fix edit/delete add-on, and open add-on folder on recent linux
- fix error when clicking on cogs in deck list
- show more info when libraries fail to load on linux
- fix square boxes appearing in import dialog on ubuntu 16.04

=== Changes in alpha 3 ===

- image support
- fixes for syncing
- fix duplicate paste on windows/linux
- prevent fields from collapsing when all content deleted
- fix card layout preview on windows/linux
- fix 'onHeight' errors when moving rapidly through cards in browser
- basic add-on porting docs in github
- fix an error in logging
- fix missing translations
- fix 'loading' message in type in the answer
- fix error syncing when running from usb drive

=== Changes in alpha 2 ===

- free memory after various dialogs closed, which should improve the memory
  footprint
- update the toolkit again on all but the 32 bit linux build, which should fix
  the mac touchpad crashes and some other issues
- re-enable syncing, which should work but will not show any progress info
  during long uploads/downloads
- update packaging, which may fix intermittent startup problems on linux
- fix collection export
- fix type in the answer
- hide annoying message when typing/pasting in a http link
- add-ons no longer need a separate top level file (thanks to subfusc)
- fix scheduling not ensuring next ivl always +1 (thanks to ankitest)
- pull requests now have automatic tests (thanks to RawToast)
- hook for showDeckOptions (thanks to ankitest)
- fix browser scrolling horizontally (thanks to Houssam)
- fix y axis rendering in graphs (thanks to matthayes)
